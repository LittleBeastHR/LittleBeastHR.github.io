<!-- Save this as /in/index.html on your GitHub Pages repo -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Little Beast — Follow on Spotify</title>

  <!-- Meta Pixel -->
  <script>
    !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
    n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}
    (window, document,'script','https://connect.facebook.net/en_US/fbevents.js');
    fbq('init','1066942378877644'); fbq('track','PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=1066942378877644&ev=PageView&noscript=1"/></noscript>

  <style>
    :root{
      --bg:#0f1209; /* charcoal */
      --card:rgba(255,255,255,.02);
      --line:#222;
      --text:#fff;
      --accent:#1DB954; /* Spotify green */
    }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,sans-serif}
    .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
    .card{width:100%;max-width:420px;text-align:center;padding:28px 24px;border:1px solid var(--line);
      border-radius:18px;background:var(--card)}
    h1{font-size:22px;margin:0 0 14px}
    p{opacity:.8;margin:0 0 16px;font-size:15px}
    .btn{display:block;width:100%;margin-top:16px;padding:14px 16px;border-radius:12px;background:var(--accent);
      color:#000;text-decoration:none;font-weight:800;font-size:18px}
    .logo{max-width:160px;margin-bottom:18px}
    .divider{height:1px;background:#2a2a2a;margin:18px 0}
    .fine{opacity:.6;font-size:12px;margin-top:10px}
    iframe{border:none;overflow:hidden}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <!-- Update this path if your logo lives elsewhere -->
      <img class="logo" src="https://littlebeasthr.github.io/in/logo.png" alt="Little Beast" />
      <h1>Follow Little Beast on Spotify</h1>
      <p>One tap. That’s it.</p>

      <!-- Official Spotify Follow widget (best way to get a true “Follow” action) -->
      <div id="followWidget">
        <iframe
          src="https://open.spotify.com/follow/1/?uri=spotify:artist:1VtBno35V1m2SDlvNwaWbY&size=detail&theme=dark"
          width="300" height="56" scrolling="no" frameborder="0"
          title="Follow Little Beast on Spotify">
        </iframe>
      </div>

      <div class="divider"></div>

      <!-- Fallback: open profile in app/web (we can track this click) -->
      <a id="openSpotify" class="btn" href="#">Open in Spotify</a>

      <p class="fine">If the Follow button doesn’t show, tap “Open in Spotify” and hit Follow there.</p>
    </div>
  </div>

  <script>
    // Destination with UTM tagging consistent with your India campaign
    const dest = new URL("https://open.spotify.com/artist/1VtBno35V1m2SDlvNwaWbY");
    dest.searchParams.set("utm_source","meta");
    dest.searchParams.set("utm_medium","ig_ads");
    dest.searchParams.set("utm_campaign","in_follow_only");

    // Track explicit opens
    document.getElementById('openSpotify').addEventListener('click', function(e){
      e.preventDefault();
      if (window.fbq) fbq('trackCustom','SpotifyOpen',{geo:'IN',campaign:'in_follow_only'});
      setTimeout(()=>{ window.location.href = dest; }, 180);
    });

    // Optional: small ping if the follow widget is visible (can help with attribution diagnostics)
    window.addEventListener('load', () => {
      const w = document.getElementById('followWidget');
      const seen = !!w && w.offsetHeight > 0;
      if (seen && window.fbq) fbq('trackCustom','FollowWidgetViewed',{geo:'IN'});
    });
  </script>
</body>
</html>

<!-- Add this geo-redirect snippet to your MAIN homepage (index.html) so India traffic is routed to /in/ -->
<!-- Place it just before the closing </body> tag on the root page. -->
<script>
(async () => {
  try {
    const res = await fetch('https://ipapi.co/json/');
    const data = await res.json();
    if (data && data.country_code === 'IN') {
      if (window.fbq) fbq('trackCustom','GeoRedirect',{to:'/in/'});
      window.location.replace('/in/');
    }
  } catch (e) { /* silently ignore */ }
})();
</script>
